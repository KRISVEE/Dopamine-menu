<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dopamine Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-custom { animation: spin 1s linear infinite; }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-800 font-sans transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        // --- 1. CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyC7Ct5hYhSVRHc3-o3RBbaWxHu4xByfHe0",
            authDomain: "dopamine-menu-c0340.firebaseapp.com",
            projectId: "dopamine-menu-c0340",
            storageBucket: "dopamine-menu-c0340.firebasestorage.app",
            messagingSenderId: "184986050340",
            appId: "1:184986050340:web:d3a9c4e187dd87c5a41db1",
            measurementId: "G-M6Y6EY56CM"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL).catch(error => {
            console.error("Persistence Error:", error);
        });

        try {
            db.enablePersistence().catch(err => {
                console.log("DB Persistence suppressed");
            });
        } catch(e) { console.log("Persistence init skipped"); }

        const appId = "dopamine-menu-google-v1";

        const { useState, useEffect, useRef } = React;

        // --- AUDIO ENGINE (Robust) ---
        // We create the context lazily to handle browser autoplay policies
        let audioCtx = null;

        const initAudio = () => {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            return audioCtx;
        };

        const playSound = (type) => {
            const ctx = initAudio();
            if (!ctx) return;

            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            const now = ctx.currentTime;

            if (type === 'tick') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.05);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.05);
                osc.start(now);
                osc.stop(now + 0.05);
            } else if (type === 'win') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(440, now);
                osc.frequency.setValueAtTime(554, now + 0.1); // C#
                osc.frequency.setValueAtTime(659, now + 0.2); // E
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0.1, now + 0.3);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.8);
                osc.start(now);
                osc.stop(now + 0.8);
            } else if (type === 'delete') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(50, now + 0.2);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            }
        };

        // --- COMPONENTS ---

        const EmojiPicker = ({ isOpen, onClose, onSelect }) => {
            if (!isOpen) return null;
            const commonEmojis = ['âœ¨', 'ğŸ”¥', 'ğŸ’ª', 'ğŸ§ ', 'ğŸ’§', 'ğŸµ', 'ğŸ•', 'ğŸˆ', 'ğŸ’¤', 'ğŸ“š', 'ğŸ’»', 'ğŸ§¹', 'ğŸ®', 'ğŸ•', 'ğŸ«', 'ğŸ›€', 'ğŸ§˜', 'ğŸš´', 'ğŸ¨', 'ğŸ“', 'âœ…', 'â¤ï¸', 'ğŸŒŸ', 'ğŸ’¡'];
            const [customEmoji, setCustomEmoji] = useState('');

            return (
                <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm" onClick={onClose}>
                    <div className="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-xl max-w-xs w-full animate-in zoom-in-95 duration-200" onClick={e => e.stopPropagation()}>
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-lg font-bold text-slate-800 dark:text-white">Pick an Icon</h3>
                            <button onClick={onClose} className="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200">âœ•</button>
                        </div>
                        <div className="grid grid-cols-6 gap-2 mb-6">
                            {commonEmojis.map(emoji => (
                                <button key={emoji} onClick={() => onSelect(emoji)} className="text-2xl p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl transition-colors flex items-center justify-center">{emoji}</button>
                            ))}
                        </div>
                        <form onSubmit={(e) => { e.preventDefault(); if(customEmoji) onSelect(customEmoji); }} className="flex gap-2">
                            <input className="flex-1 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-xl px-4 py-2 text-center text-xl focus:ring-2 focus:ring-indigo-500 outline-none w-full" placeholder="Type..." value={customEmoji} onChange={e => setCustomEmoji(e.target.value)} maxLength={2} />
                            <button type="submit" className="bg-slate-900 dark:bg-indigo-600 text-white px-4 rounded-xl font-bold hover:bg-slate-700 dark:hover:bg-indigo-500">Save</button>
                        </form>
                    </div>
                </div>
            );
        };

        const FocusTimer = ({ durationMinutes, onClose }) => {
            // Safe parse duration, default to 15 if parse fails
            const initialMinutes = parseInt(durationMinutes) || 15;
            const [timeLeft, setTimeLeft] = useState(initialMinutes * 60);
            const [isActive, setIsActive] = useState(false);

            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) {
                    interval = setInterval(() => setTimeLeft(t => t - 1), 1000);
                } else if (timeLeft === 0) {
                    setIsActive(false);
                    playSound('win'); // Timer done sound
                }
                return () => clearInterval(interval);
            }, [isActive, timeLeft]);

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            return (
                <div className="mt-4 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600 animate-in fade-in slide-in-from-top-2">
                    <div className="flex justify-between items-center mb-2">
                        <span className="text-xs font-bold uppercase text-slate-400 dark:text-slate-300 tracking-wider">Focus Timer</span>
                        <button onClick={onClose} className="text-xs text-slate-400 hover:text-red-500">âœ•</button>
                    </div>
                    <div className="text-4xl font-mono font-bold text-center text-slate-800 dark:text-white mb-4">
                        {formatTime(timeLeft)}
                    </div>
                    <div className="flex gap-2 justify-center">
                        <button onClick={() => setIsActive(!isActive)} className={`px-4 py-2 rounded-xl font-bold text-sm transition-colors ${isActive ? 'bg-amber-100 text-amber-700 hover:bg-amber-200' : 'bg-indigo-600 text-white hover:bg-indigo-700'}`}>
                            {isActive ? 'Pause' : 'Start Focus'}
                        </button>
                        <button onClick={() => { setIsActive(false); setTimeLeft(initialMinutes * 60); }} className="px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-200 rounded-xl font-bold text-sm hover:bg-slate-300 dark:hover:bg-slate-500">
                            Reset
                        </button>
                    </div>
                </div>
            );
        };

        const LoginScreen = ({ onLogin }) => (
            <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-slate-50 dark:bg-slate-900 transition-colors duration-300">
                <div className="bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl max-w-md w-full text-center border border-slate-100 dark:border-slate-700">
                    <div className="text-5xl mb-4">ğŸ§ </div>
                    <h1 className="text-3xl font-extrabold text-slate-900 dark:text-white mb-2">Dopamine Menu</h1>
                    <p className="text-slate-500 dark:text-slate-400 mb-8">Stop doomscrolling. Start doing.<br/>Sync across all your devices.</p>
                    <button onClick={onLogin} className="w-full py-4 px-6 bg-white dark:bg-slate-700 border-2 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-700 dark:text-white font-bold rounded-xl flex items-center justify-center gap-3 transition-all active:scale-95 shadow-sm">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" className="w-6 h-6" />
                        Continue with Google
                    </button>
                </div>
            </div>
        );

        const LoadingScreen = () => (
             <div className="min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900">
                <div className="animate-spin-custom text-4xl mb-4">ğŸ§ </div>
                <p className="text-slate-400 text-sm font-medium">Waking up your brain...</p>
             </div>
        );

        const DopamineMenu = () => {
            const defaultMenu = {
                appetizers: [{ id: 1, text: 'Drink a glass of water', icon: 'ğŸ’§', duration: '5m' }, { id: 2, text: 'Do 10 jumping jacks', icon: 'ğŸƒ', duration: '2m' }],
                entrees: [{ id: 6, text: 'Work on coding project', icon: 'ğŸ’»', duration: '30m' }],
                sides: [{ id: 10, text: 'Fold laundry (w/ Podcast)', icon: 'ğŸ‘•', duration: '15m' }],
                desserts: [{ id: 14, text: 'Scroll TikTok (15 min timer)', icon: 'ğŸ“±', duration: '15m' }],
            };

            const [user, setUser] = useState(null);
            const [isAuthChecking, setIsAuthChecking] = useState(true);
            const [menu, setMenu] = useState(defaultMenu);
            const [activeCategory, setActiveCategory] = useState('appetizers');
            const [randomPick, setRandomPick] = useState(null);
            const [isSpinning, setIsSpinning] = useState(false);
            const [newItem, setNewItem] = useState('');
            const [newDuration, setNewDuration] = useState('15m'); // New State for Duration
            const [status, setStatus] = useState('loading');
            
            // Feature State
            const [isEmojiPickerOpen, setIsEmojiPickerOpen] = useState(false);
            const [editingItem, setEditingItem] = useState(null);
            const [showTimer, setShowTimer] = useState(false);
            const [isDarkMode, setIsDarkMode] = useState(() => localStorage.getItem('dopamine_dark_mode') === 'true');

            // 1. ONE-TIME AUDIO UNLOCK
            useEffect(() => {
                const unlockAudio = () => {
                    initAudio();
                    document.removeEventListener('click', unlockAudio);
                    document.removeEventListener('touchstart', unlockAudio);
                };
                document.addEventListener('click', unlockAudio);
                document.addEventListener('touchstart', unlockAudio);
                return () => {
                    document.removeEventListener('click', unlockAudio);
                    document.removeEventListener('touchstart', unlockAudio);
                }
            }, []);

            // Dark Mode Effect
            useEffect(() => {
                if (isDarkMode) {
                    document.documentElement.classList.add('dark');
                    document.body.classList.add('bg-slate-900');
                    document.body.classList.remove('bg-slate-50');
                } else {
                    document.documentElement.classList.remove('dark');
                    document.body.classList.remove('bg-slate-900');
                    document.body.classList.add('bg-slate-50');
                }
                localStorage.setItem('dopamine_dark_mode', isDarkMode);
            }, [isDarkMode]);

            // Auth Listener
            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged((currentUser) => {
                    setUser(currentUser);
                    setIsAuthChecking(false);
                    if (!currentUser) setStatus('login_needed');
                });
                return () => unsubscribe();
            }, []);

            // Data Sync
            useEffect(() => {
                if (!user) return;
                const docRef = db.collection('artifacts').doc(appId).collection('users').doc(user.uid).collection('data').doc('menu');
                setStatus('syncing');
                const unsubscribe = docRef.onSnapshot((docSnap) => {
                    if (docSnap.exists) {
                        setMenu(docSnap.data().items);
                        setStatus('saved');
                    } else {
                        docRef.set({ items: defaultMenu, createdAt: new Date() });
                        setStatus('saved');
                    }
                }, (error) => { console.error("Sync Error", error); setStatus('error'); });
                return () => unsubscribe();
            }, [user?.uid]);

            const saveMenu = async (newMenu) => {
                if (!user) return;
                setStatus('syncing');
                try {
                    const docRef = db.collection('artifacts').doc(appId).collection('users').doc(user.uid).collection('data').doc('menu');
                    await docRef.set({ items: newMenu, updatedAt: new Date() }, { merge: true });
                } catch (e) { setStatus('error'); alert("Could not save: " + e.message); }
            };

            const login = async () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                try { await auth.signInWithPopup(provider); } catch (error) { alert("Login failed: " + error.message); }
            };
            const logout = () => auth.signOut();

            const handleAddItem = (e) => {
                e.preventDefault();
                if (!newItem.trim()) return;
                const item = { id: Date.now(), text: newItem, icon: 'âœ¨', duration: newDuration };
                saveMenu({ ...menu, [activeCategory]: [...menu[activeCategory], item] });
                setNewItem('');
                setNewDuration('15m'); // Reset
            };

            const handleDelete = (id) => {
                playSound('delete');
                saveMenu({ ...menu, [activeCategory]: menu[activeCategory].filter(i => i.id !== id) });
            };

            const pickRandom = () => {
                setIsSpinning(true);
                setRandomPick(null);
                setShowTimer(false); // Reset timer visibility
                let count = 0;
                const items = menu[activeCategory];
                if (items.length === 0) { setIsSpinning(false); return; }
                const interval = setInterval(() => {
                    setRandomPick(items[Math.floor(Math.random() * items.length)]);
                    playSound('tick'); 
                    count++;
                    if (count > 10) { 
                        clearInterval(interval); 
                        setIsSpinning(false);
                        playSound('win'); 
                    }
                }, 100);
            };

            const handleOpenEmojiPicker = (item) => { setEditingItem(item); setIsEmojiPickerOpen(true); };
            const handleEmojiSelect = (newEmoji) => {
                if (!editingItem) return;
                const updatedList = menu[activeCategory].map(item => item.id === editingItem.id ? { ...item, icon: newEmoji } : item);
                saveMenu({ ...menu, [activeCategory]: updatedList });
                setIsEmojiPickerOpen(false);
                setEditingItem(null);
            };

            // NEW: Handle Time Editing
            const handleEditTime = (item) => {
                const newTime = prompt("Edit Duration (e.g., 5m, 1h, 30s):", item.duration || "15m");
                if (newTime !== null && newTime.trim() !== "") {
                    const updatedList = menu[activeCategory].map(i => i.id === item.id ? { ...i, duration: newTime.trim() } : i);
                    saveMenu({ ...menu, [activeCategory]: updatedList });
                }
            };

            const categories = {
                appetizers: { title: 'Appetizers', color: 'bg-amber-100 text-amber-800 border-amber-300 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-700', icon: 'âš¡' },
                entrees: { title: 'EntrÃ©es', color: 'bg-emerald-100 text-emerald-800 border-emerald-300 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700', icon: 'ğŸ½ï¸' },
                sides: { title: 'Sides', color: 'bg-sky-100 text-sky-800 border-sky-300 dark:bg-sky-900/30 dark:text-sky-200 dark:border-sky-700', icon: 'ğŸ¥—' },
                desserts: { title: 'Desserts', color: 'bg-rose-100 text-rose-800 border-rose-300 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-700', icon: 'ğŸ°' },
            };

            const durationOptions = ['5m', '15m', '30m', '1h'];

            if (isAuthChecking) return <LoadingScreen />;
            if (!user) return <LoginScreen onLogin={login} />;

            return (
                <div className="min-h-screen pb-20 dark:text-white transition-colors duration-300">
                    {/* Header */}
                    <div className="bg-white dark:bg-slate-800 border-b dark:border-slate-700 px-4 py-3 sticky top-0 z-20 flex justify-between items-center shadow-sm">
                        <h1 className="font-bold text-lg flex items-center gap-2">ğŸ§  Dopamine Menu</h1>
                        <div className="flex items-center gap-3">
                            <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:scale-105 transition-transform">
                                {isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™'}
                            </button>
                            <span className={`text-[10px] uppercase font-bold tracking-wider px-2 py-1 rounded-full ${status === 'saved' ? 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400' : 'bg-yellow-100 text-yellow-600'}`}>
                                {status === 'saved' ? 'SYNCED' : status}
                            </span>
                            <img src={user.photoURL} className="w-8 h-8 rounded-full border border-gray-200 dark:border-slate-600 cursor-pointer" onClick={logout} title="Click to logout" />
                        </div>
                    </div>

                    <div className="max-w-2xl mx-auto p-4">
                        <div className="mb-6">
                            <h2 className="text-2xl font-bold text-slate-800 dark:text-white">Hi, {user.displayName ? user.displayName.split(' ')[0] : 'Brain'}! ğŸ‘‹</h2>
                            <p className="text-slate-500 dark:text-slate-400">What does your brain need right now?</p>
                        </div>

                        {/* Tabs */}
                        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6">
                            {Object.entries(categories).map(([key, info]) => (
                                <button key={key} onClick={() => { setActiveCategory(key); setRandomPick(null); }}
                                    className={`p-3 rounded-2xl border-2 flex flex-col items-center justify-center transition-all duration-200
                                    ${activeCategory === key ? info.color + ' shadow-md scale-105' : 'bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-400 dark:text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700'}`}>
                                    <span className="text-xl mb-1">{info.icon}</span>
                                    <span className="text-xs font-bold uppercase tracking-wide">{info.title}</span>
                                </button>
                            ))}
                        </div>

                        {/* Main Card */}
                        <div className="bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors duration-300">
                            <div className={`px-6 py-4 border-b border-slate-50 dark:border-slate-700 flex justify-between items-center bg-opacity-30 ${categories[activeCategory].color.split(' ')[0]}`}>
                                <h2 className="text-lg font-bold flex items-center gap-2">
                                    {categories[activeCategory].icon} {categories[activeCategory].title}
                                </h2>
                                <button onClick={pickRandom} disabled={isSpinning} className="px-5 py-2 bg-slate-900 dark:bg-indigo-600 text-white rounded-xl font-bold shadow-lg active:scale-95 transition-all text-sm flex items-center gap-2">
                                    {isSpinning ? <div className="animate-spin-custom">ğŸ²</div> : 'ğŸ² Pick One'}
                                </button>
                            </div>

                            {/* Result Area */}
                            {randomPick && (
                                <div className="bg-indigo-600 text-white p-8 text-center animate-in fade-in zoom-in duration-300 relative">
                                    <div className="text-5xl mb-3">{randomPick.icon}</div>
                                    <div className="text-2xl font-bold leading-tight mb-2">{randomPick.text}</div>
                                    <div className="inline-block bg-indigo-500/50 px-3 py-1 rounded-full text-xs font-medium mb-4">
                                        â±ï¸ {randomPick.duration || '15m'}
                                    </div>
                                    
                                    {!showTimer && (
                                        <div className="mt-2">
                                            <button onClick={() => setShowTimer(true)} className="bg-white text-indigo-600 px-6 py-2 rounded-full font-bold shadow-lg hover:scale-105 transition-transform text-sm">
                                                â³ Start Timer
                                            </button>
                                        </div>
                                    )}

                                    {showTimer && (
                                        <FocusTimer 
                                            durationMinutes={parseInt(randomPick.duration) || 15} 
                                            onClose={() => setShowTimer(false)}
                                        />
                                    )}
                                </div>
                            )}

                            {/* List */}
                            <div className="divide-y divide-slate-50 dark:divide-slate-700 max-h-[50vh] overflow-y-auto">
                                {menu[activeCategory].length === 0 ? (
                                    <div className="p-8 text-center text-slate-400 text-sm">Nothing here yet. Add something!</div>
                                ) : (
                                    menu[activeCategory].map((item) => (
                                        <div key={item.id} className="flex justify-between items-center p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group">
                                            <div className="flex gap-4 items-center">
                                                <button onClick={() => handleOpenEmojiPicker(item)} className="text-xl bg-white dark:bg-slate-700 p-2 rounded-lg shadow-sm border border-slate-100 dark:border-slate-600 hover:bg-indigo-50 dark:hover:bg-slate-600 transition-colors active:scale-95">
                                                    {item.icon}
                                                </button>
                                                <div className="flex flex-col">
                                                    <span className="font-medium text-slate-700 dark:text-slate-200">{item.text}</span>
                                                    {/* Editable Time Tag */}
                                                    <button 
                                                        onClick={() => handleEditTime(item)}
                                                        className="text-[10px] text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-slate-900/50 px-1.5 py-0.5 rounded w-fit mt-0.5 hover:bg-indigo-50 hover:text-indigo-600 transition-colors text-left"
                                                        title="Click to edit duration"
                                                    >
                                                        â±ï¸ {item.duration || '15m'}
                                                    </button>
                                                </div>
                                            </div>
                                            <button onClick={() => handleDelete(item.id)} className="opacity-100 md:opacity-0 md:group-hover:opacity-100 p-3 text-slate-300 hover:text-red-500 active:text-red-600 transition-all">
                                                ğŸ—‘ï¸
                                            </button>
                                        </div>
                                    ))
                                )}
                            </div>

                            {/* Add Item with Custom Duration */}
                            <form onSubmit={handleAddItem} className="p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-700 flex gap-2">
                                <input value={newItem} onChange={e => setNewItem(e.target.value)} placeholder={`Add to ${categories[activeCategory].title}...`} className="flex-1 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm" />
                                
                                {/* Custom Duration Input */}
                                <div className="relative w-24">
                                    <input 
                                        list="durations"
                                        value={newDuration} 
                                        onChange={(e) => setNewDuration(e.target.value)}
                                        className="w-full px-2 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center"
                                        placeholder="Time"
                                    />
                                    <datalist id="durations">
                                        <option value="5m" />
                                        <option value="15m" />
                                        <option value="30m" />
                                        <option value="1h" />
                                    </datalist>
                                </div>

                                <button type="submit" className="w-12 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-md flex items-center justify-center text-xl">+</button>
                            </form>
                        </div>
                    </div>

                    <EmojiPicker isOpen={isEmojiPickerOpen} onClose={() => setIsEmojiPickerOpen(false)} onSelect={handleEmojiSelect} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DopamineMenu />);
    </script>
</body>
</html>
